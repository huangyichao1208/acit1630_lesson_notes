-- database: ./test_data_constraints_h_yichao.db

SELECT * FROM test;

drop table test;

drop table grade;

create table grade 
(grade_id integer PRIMARY KEY, 
course_code varchar(15) not null, 
grade decimal(5,2) 
);

alter table grade 
rename to grade_old;

create table grade 
(grade_id integer PRIMARY KEY, 
course_code varchar(15) not null, 
grade decimal(5,2)
constraint chk_grade_range
check (grade>=0 and grade<=100) 
);

insert into grade 
(course_code) values 
('ACIT 1630');

update grade 
set grade = 76.30
where grade_id =1;

drop table person;

create table person 
(
    person_id integer PRIMARY KEY,
    first_name varchar(15) not null,
    last_name varchar(15) not null,
    birth_date datetime not null,
    death_date datetime
);

alter table person 
rename to person_old;

create table person 
(
    person_id integer PRIMARY KEY,
    first_name varchar(15) not null,
    last_name varchar(15) not null,
    birth_date datetime not null,
    death_date datetime
    constraint CK_Valid_dates
    check (birth_date<=death_date) 
);

insert into person
(first_name, last_name, birth_date,
death_date)
VALUES
('Albert', 'Einstein',
'1879-03-14', '1955-04-18');